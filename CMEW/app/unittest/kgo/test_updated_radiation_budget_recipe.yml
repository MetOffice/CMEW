# (C) Crown Copyright 2024-2026, Met Office.
# The LICENSE.md file contains full licensing details.
# ESMValTool - Updated Radiation Budget
# To be used for testing purposes. Represents KGO for `update_recipe`.
---
datasets:
- activity: ESMVal
  alias: Ref Test Label
  dataset: HadGEM3-GC31-LL
  end_year: 1993
  ensemble: r1i1p1f3
  exp: amip
  grid: gn
  project: ESMVal
  start_year: 1993
- activity: ESMVal
  alias: Eval Test Label
  dataset: UKESM1-0-LL
  end_year: 1993
  ensemble: r1i1p1f1
  exp: amip
  grid: gn
  project: ESMVal
  start_year: 1993
diagnostics:
  seasonal_radiation_budget:
    description: Seasonal radiation budget for HadGEM3 vs UKESM1.
    scripts:
      radiation_budget:
        script: radiation_budget/seasonal_radiation_budget.py
    variables:
      hfls:
        mip: Amon
        preprocessor: seasonal
      hfss:
        mip: Amon
        preprocessor: seasonal
      rlds:
        mip: Amon
        preprocessor: seasonal
      rls:
        mip: Emon
        preprocessor: seasonal
      rlut:
        mip: Amon
        preprocessor: seasonal
      rlutcs:
        mip: Amon
        preprocessor: seasonal
      rsds:
        mip: Amon
        preprocessor: seasonal
      rsdt:
        mip: Amon
        preprocessor: seasonal
      rss:
        mip: Emon
        preprocessor: seasonal
      rsut:
        mip: Amon
        preprocessor: seasonal
      rsutcs:
        mip: Amon
        preprocessor: seasonal
  single_value_radiation_budget:
    description: Radiation budget for HadGEM3 vs UKESM1.
    scripts:
      radiation_budget:
        script: radiation_budget/radiation_budget.py
    variables:
      hfls:
        mip: Amon
        preprocessor: single_value
      hfss:
        mip: Amon
        preprocessor: single_value
      rlds:
        mip: Amon
        preprocessor: single_value
      rls:
        mip: Emon
        preprocessor: single_value
      rlut:
        additional_datasets:
        - dataset: CERES-EBAF
          end_year: 2010
          level: L3B
          project: obs4mips
          start_year: 2000
          tier: 1
          version: Ed2-7
        mip: Amon
        preprocessor: single_value
      rlutcs:
        additional_datasets:
        - dataset: CERES-EBAF
          end_year: 2010
          level: L3B
          project: obs4mips
          start_year: 2000
          tier: 1
          version: Ed2-7
        mip: Amon
        preprocessor: single_value
      rsds:
        mip: Amon
        preprocessor: single_value
      rsdt:
        mip: Amon
        preprocessor: single_value
      rss:
        mip: Emon
        preprocessor: single_value
      rsut:
        additional_datasets:
        - dataset: CERES-EBAF
          end_year: 2010
          level: L3B
          project: obs4mips
          start_year: 2000
          tier: 1
          version: Ed2-7
        mip: Amon
        preprocessor: single_value
      rsutcs:
        additional_datasets:
        - dataset: CERES-EBAF
          end_year: 2010
          level: L3B
          project: obs4mips
          start_year: 2000
          tier: 1
          version: Ed2-7
        mip: Amon
        preprocessor: single_value
documentation:
  authors:
  - lillis_jon
  - hogan_emma
  description: This diagnostic analyses the radiation budget by separating top-of-atmosphere
    fluxes into clear-sky and cloud forcing components, and surface fluxes into downwelling
    and upwelling components. Model predictions are compared against three observational
    estimates, one of which (Stephens et al. 2012) includes uncertainty estimates.
    When the black error bars overlap the zero line, the model is consistent with
    observations according to Stephens et al. (2012).
  maintainer:
  - lillis_jon
  - hogan_emma
  title: Radiation Budget
preprocessors:
  seasonal:
    area_statistics:
      operator: mean
    climate_statistics:
      operator: mean
      period: seasonal
      seasons:
      - DJF
      - MAM
      - JJA
      - SON
  single_value:
    area_statistics:
      operator: mean
    climate_statistics:
      operator: mean
      period: full
